<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parent Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Parent Dashboard</h1>
<div class="dashboard-container" id="dashboard"></div>

<script>
const students = {
    "S001": {name:"SHRUTHI.M.G", class:"ECE-A", parent:"Mr. Kumar", phone:"9876543210", email:"parent1@mail.com", teacher:"Ms. Priya", tphone:"9876001111"},
    "S002": {name:"ARJUN.M.M", class:"ECE-A", parent:"Mrs. Aruna", phone:"9876501234", email:"parent2@mail.com", teacher:"Ms. Priya", tphone:"9876001111"},
    "S003": {name:"SUBHASHREE.R.R", class:"ECE-B", parent:"Mr. Raj", phone:"9876512345", email:"parent3@mail.com", teacher:"Mr. Ravi", tphone:"9876002222"},
    "S004": {name:"VIJAYAKUMAR.S", class:"ECE-B", parent:"Mrs. Meena", phone:"9876523456", email:"parent4@mail.com", teacher:"Mr. Ravi", tphone:"9876002222"},
    "S005": {name:"VAISHNAVI.K", class:"ECE-A", parent:"Mr. Hari", phone:"9876534567", email:"parent5@mail.com", teacher:"Ms. Priya", tphone:"9876001111"}
};

let record = JSON.parse(localStorage.getItem("attendance")) || {};
let parentPhone = "9876543210"; // change to simulate logged-in parent

function createCard(id){
    let r = record[id] || {present:0,total:0};
    let percent = r.total? Math.round((r.present/r.total)*100) : 0;
    let color = percent >= 75 ? "green" : "red";
    let card = document.createElement("div");
    card.className = "student-card " + color;
    card.innerHTML = `<h3>${students[id].name}</h3>
                      <p>Class: ${students[id].class}</p>
                      <p>Attendance: ${percent}% (${r.present}/${r.total})</p>
                      <p>Class Teacher: ${students[id].teacher} (${students[id].tphone})</p>`;
    if(percent < 75){
        card.innerHTML += `<p style="color:red;">Alert: Attendance below 75%!</p>`;
    }
    return card;
}

const dashboard = document.getElementById("dashboard");
for(let id in students){
    if(students[id].phone === parentPhone){
        dashboard.appendChild(createCard(id));
    }
}
</script>
</body>
</html>
